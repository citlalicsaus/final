{"version":3,"sources":["../../src/middlewares/auth.js"],"names":["req","res","next","authorization","headers","decode","jwt","verify","SECRET","onUserFound","user","User","findOne","_id","id","then","catch","e","registerPath"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;eAEe,CAACA,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAAoB;AACjC,QAAM;AAAEC,IAAAA;AAAF,MAAoBH,GAAG,CAACI,OAA9B;;AACA,MAAI;AACF,UAAMC,MAAM,GAAGC,sBAAIC,MAAJ,CAAWJ,aAAX,EAA0BK,cAA1B,CAAf;;AACA,UAAMC,WAAW,GAAIC,IAAD,IAAU;AAC5B,UAAIA,IAAJ,EAAU;AACRV,QAAAA,GAAG,CAACU,IAAJ,GAAWA,IAAX;AACD;;AACDR,MAAAA,IAAI;AACL,KALD;;AAMAS,kBAAKC,OAAL,CAAa;AAAEC,MAAAA,GAAG,EAAER,MAAM,CAACS;AAAd,KAAb,EACGC,IADH,CACQN,WADR,EAEGO,KAFH,CAES,MAAMd,IAAI,EAFnB;AAGD,GAXD,CAWE,OAAOe,CAAP,EAAU;AACVf,IAAAA,IAAI;AACL;AACF,C;;;;AAEM,MAAMgB,YAAY,GAAG,MAAM,CAAE,CAA7B","sourcesContent":["import jwt from 'jsonwebtoken';\nimport { SECRET } from '../config';\nimport User from '../models/user';\n\nexport default (req, res, next) => {\n  const { authorization } = req.headers;\n  try {\n    const decode = jwt.verify(authorization, SECRET);\n    const onUserFound = (user) => {\n      if (user) {\n        req.user = user;\n      }\n      next();\n    };\n    User.findOne({ _id: decode.id })\n      .then(onUserFound)\n      .catch(() => next());\n  } catch (e) {\n    next();\n  }\n};\n\nexport const registerPath = () => {};\n"],"file":"auth.js"}